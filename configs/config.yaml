# configs/config.yaml

# --- General Experiment Settings ---
simulation_name: "RansomLog_SmolLM135M_LoRA_R8"
dataset_name: "ransomlog"  # 'ransomlog' or 'hdfs'
description: "First experiment with RansomLog dataset using SmolLM-135M and LoRA rank 8."

# --- Paths ---
# All paths are relative to the project root
data_base_path: "./data/"
results_path: "./results/"

# --- Data Processing Settings ---
# These settings are specific to the dataset being used
# For RansomLog, you might define session_type: 'time_window' or 'process_id'
# and window_size: '5m'
session_window_spliter: " ;-; "
force_reprocess_data: False # If True, will re-run the data processing steps

# --- Model Settings ---
model_name: "HuggingFaceTB/SmolLM-135M"
lora: True
lora_rank: 8
lora_alpha_multiplier: 2 # lora_alpha will be lora_rank * multiplier
lora_dropout: 0.1

# --- Federated Learning Settings ---
use_parallel_training: true # Set to false to run sequentially (e.g., with CUDA_VISIBLE_DEVICES=1)
num_rounds: 50
num_clients: 50
client_frac: 0.1 # Fraction of clients to select each round

# Data distribution and client behavior
#   data_distribution_strategy: 'iid', 'quantity_skew_dirichlet', or 'hetero_device'
data_distribution_strategy: "iid"
non_iid_alpha: 0.5          # Used only for 'quantity_skew_dirichlet'

# Client selection and aggregation
client_selection_strategy: "uniform"  # or 'data_size_proportional'
use_weighted_aggregation: false

# FedProx regularization (reduces client drift in Non-IID scenarios)
# Set fedprox_mu > 0 to enable. Recommended values: 0.001, 0.01, 0.1
# Reference: https://arxiv.org/abs/1812.06127
fedprox_mu: 0.0  # Disabled for IID scenario

# --- Client Training Settings ---
max_steps: 10
batch_size: 32
initial_lr: 0.001
min_lr: 0.00001
lr_scheduler_type: 'cosine' # or 'constant'

# --- Evaluation Settings ---
# The k values for top-k accuracy calculation
top_k_values: [1, 3, 5, 10]
# The number of thresholds to test when finding the best F1 score
f1_threshold_steps: 1000

# Enable temporal / early-stage evaluation metrics when the dataset supports them
enable_temporal_metrics: false
