# Relat√≥rio 23/12

![](https://t90131759456.p.clickup-attachments.com/t90131759456/508c5d65-7148-489f-83bf-256b0f4d6e0b/Code_Generated_Image(2).png)
![](https://t90131759456.p.clickup-attachments.com/t90131759456/8661f5f7-ea73-4e23-a132-478a725be3d0/Code_Generated_Image(3).png)

### An√°lise dos Resultados: Initial LR = 0.0003

A estrat√©gia de aumentar levemente o Learning Rate (de 0.0001 para 0.0003) foi extremamente bem-sucedida. Os resultados mostram que o sistema superou a estagna√ß√£o (onde K=10 estava travado em ~0.79) e agora atinge F1 > 0.88 de forma consistente nos √∫ltimos rounds.

1. **Comparativo de Performance (K=10)**

| Cen√°rio | F1 Final (M√©dia) | Estabilidade | Status |
| ---| ---| ---| --- |
| LR 0.0001 (Anterior) | ~0.79 | Alta (Estagnado) | üü° Est√°vel mas Limitado |
| LR 0.0003 (Atual) | ~0.87 | Alta (Crescente) | üü¢ Excelente |
| LR 0.0005 (Antigo) | < 0.70 | Baixa (Degrada√ß√£o) | üî¥ Colapso |

**Conclus√£o:** `LR = 0.0003` √© o "Sweet Spot" (Ponto Ideal). Ele √© agressivo o suficiente para aprender r√°pido, mas conservador o suficiente para evitar a diverg√™ncia catastr√≥fica do 0.0005.

### 2\. An√°lise Detalhada dos Resultados (Rounds 26-30)

Os √∫ltimos 5 rounds mostram um comportamento muito saud√°vel de converg√™ncia.

*   **Top-10 (Seguran√ßa):**
    *   Terminou em 0.88 (Round 30).
    *   Precis√£o alt√≠ssima: ~95%. Quando o modelo identifica ransomware (Top-10), ele quase nunca erra.
    *   Recall s√≥lido: ~81%. Detecta 4 de cada 5 ataques.
*   **Top-5 (Performance):**
    *   Salto gigante: Passou de ~0.45 (LR 0.0001) para 0.84 (LR 0.0003).
    *   Isso significa que o modelo agora est√° muito mais "certeiro". Ele n√£o precisa de 10 tentativas para acertar; com 5 ele j√° acerta 84% das vezes.
*   **Top-1 (Precis√£o Estrita):**
    *   Continua baixo (~0.16). Isso confirma que a heterogeneidade dos dados impede que o modelo "crave" um token √∫nico globalmente, mas ele aprendeu perfeitamente a "regi√£o sem√¢ntica" do ataque (por isso Top-5 e Top-10 s√£o altos).

### 3\. Veredito

Voc√™ encontrou a configura√ß√£o √≥tima para este cen√°rio Non-IID.

**Configura√ß√£o Vencedora:**
*   `max_steps: 50`
*   `client_frac: 0.2` (10 clientes)
*   `initial_lr: 0.0003`

## Cen√°rio: Federated Learning Non-IID (Hetero Device) Comparativo: `LR=0.0001` (Conservador) vs `LR=0.0003` (Moderado)

### 1\. O Salto de Performance

Ao aumentar levemente a taxa de aprendizado, o modelo conseguiu escapar da estagna√ß√£o e voltou a aprender, sem colapsar.

| M√©trica | Resultado com LR 0.0001 | Resultado com LR 0.0003 | Ganho |
| ---| ---| ---| --- |
| K=10 (Seguran√ßa) | 0.79 (Estagnado) | 0.88 (Crescente) | +11.4% |
| K=5 (Precis√£o Alta) | ~0.45 (Colapso) | 0.84 (Recuperado) | +86.6% |
| K=1 (Precis√£o Estrita) | ~0.16 | 0.16 | Neutro |

**Interpreta√ß√£o:** O salto gigantesco no Top-5 (+86%) √© a maior vit√≥ria. Antes, o modelo precisava de 10 tentativas para acertar o ataque. Agora, com apenas 5 tentativas, ele j√° tem 84% de chance de acerto. Isso torna o sistema muito mais confi√°vel para automa√ß√£o.

### 2\. An√°lise da Din√¢mica Temporal (Rounds 18-30)

O gr√°fico de tend√™ncia (gerado internamente) mostra tr√™s comportamentos distintos:

1. **K=10 (A Linha de Seguran√ßa):** Subiu consistentemente de 0.83 para 0.88. Isso prova que o modelo est√° refinando seu "conhecimento geral" sobre ransomware a cada rodada.
2. **K=5 (A Linha de Efici√™ncia):** Teve o crescimento mais explosivo, saindo de 0.64 para 0.84. O modelo est√° ficando "menos indeciso".
3. **K=1 (A Linha de Ru√≠do):** Permaneceu plana em ~0.16. Isso confirma que a heterogeneidade dos dados impede que todos os clientes concordem sobre o _√∫nico_ melhor token, mas eles concordam sobre a _regi√£o_ sem√¢ntica (Top-5).

### 3\. Conclus√£o Definitiva

Voc√™ encontrou a Configura√ß√£o "Goldilocks" (Nem muito quente, nem muito fria).

*   **LR 0.0005 (Muito Alto):** Causava diverg√™ncia e colapso (Overfitting).
*   **LR 0.0001 (Muito Baixo):** Causava estagna√ß√£o em 0.79.
*   **LR 0.0003 (Ideal):** Permitiu converg√™ncia s√≥lida para 0.88.

![](https://t90131759456.p.clickup-attachments.com/t90131759456/c0ccc330-6d21-4908-826d-6d2e96ac97ac/Code_Generated_Image(1).png)

*   **Cen√°rio Inicial (Esquerda):** Mostra o "colapso". O F1 Top-5 era de apenas 0.43, indicando que o modelo estava confuso devido ao overfitting local (LR alto em poucos clientes).
*   **Cen√°rio Est√°vel (Meio):** Ao reduzir o LR, paramos a degrada√ß√£o, mas o modelo estagnou (Top-5 em 0.45). Ele era seguro (Top-10 ~0.79), mas pouco √∫til para automa√ß√£o.
**Cen√°rio Otimizado (Direita):** O ajuste fino (`LR=0.0003`) liberou o potencial do modelo. O Top-5 saltou para 0.84, quase dobrando a efic√°cia pr√°tica do sistema.

![](https://t90131759456.p.clickup-attachments.com/t90131759456/bfbd4a1e-8bf5-42e5-b8d2-607634d0dc65/Code_Generated_Image(4).png)
*   **Cen√°rio Inicial (Esquerda):**
    *   Marcado pela instabilidade. Embora o Top-1 fosse ligeiramente maior (0,18), os resultados do Top-5 (0,45) e Top-10 (0,73) indicam que o modelo estava "perdido" na maioria das vezes, incapaz de generalizar a seguran√ßa.
*   **Cen√°rio Est√°vel (Centro):**
    *   Ao reduzir o LR para `1e-4`, ganhamos seguran√ßa, com o Top-10 subindo para 0,79. No entanto, o modelo tornou-se conservador demais, estagnando no Top-5 (0,44).
*   **Cen√°rio Otimizado (Direita):**
    *   O ajuste para `LR=3e-4` destravou o modelo.
    *   **Top-5 (Barra Verde Central):** Saltou de 0,44 para 0,82, representando o ganho mais expressivo do trabalho.
*   **Top-10 (Barra Amarela):** Atingiu o pico de 0,87, tornando o sistema altamente confi√°vel para alertas de seguran√ßa.

# üìä Relat√≥rio de An√°lise: M√©dias Globais de Desempenho
![](https://t90131759456.p.clickup-attachments.com/t90131759456/4b9c0b2c-e24f-4398-882c-e9453483fd30/Code_Generated_Image(5).png)

### 1\. Gr√°fico e Tabela de M√©dias Globais
Os dados a seguir representam a m√©dia aritm√©tica do F1 Score de todos os rounds (R1-R30).

| M√©trica | Cen√°rio 1 (Inst√°vel) | Cen√°rio 2 (Est√°vel) | Cen√°rio 3 (Otimizado) | Veredito |
| ---| ---| ---| ---| --- |
| Top-1 | 0.20 | 0.24 | 0.19 | üü° Empate T√©cnico (Baixo) |
| Top-3 | 0.25 | 0.33 | 0.54 | üü¢ +64% (vs Est√°vel) |
| Top-5 | 0.48 | 0.50 | 0.69 | üü¢ +38% (vs Est√°vel) |
| Top-10 | 0.81 | 0.80 | 0.85 | üü¢ +6% (Consist√™ncia) |

### 2\. Interpreta√ß√£o dos Impactos

#### A. O Paradoxo do Cen√°rio 2 (Est√°vel)
O Cen√°rio 2 (LR Baixo) apresentou a melhor m√©dia de Top-1 (0.24).
*   **Por qu√™?** Com um Learning Rate muito baixo, o modelo preservou melhor o conhecimento inicial ("Generalista") dos primeiros rounds, onde o Top-1 costuma ser mais alto antes da diverg√™ncia Non-IID come√ßar.
*   **O Problema:** Apesar de um bom in√≠cio, o modelo n√£o evoluiu. O Top-3 e Top-5 ficaram estagnados (0.33 e 0.50). √â um modelo que "n√£o piora, mas n√£o melhora".

#### B. A Superioridade do Cen√°rio 3 (Otimizado)
O Cen√°rio 3 (LR 0.0003) domina nas m√©tricas de utilidade (Top-3 e Top-5).
*   **Top-5 M√©dio de 0.69:** Na m√©dia de toda a simula√ß√£o (incluindo o in√≠cio ruim), o modelo acerta 70% das vezes em 5 tentativas. Considerando apenas o final, a precis√£o √© de 84%, mas a m√©dia global demonstra que ele aprendeu rapidamente.
*   **Top-3:** Mais que dobrou em rela√ß√£o ao cen√°rio inst√°vel (0.25 -> 0.54).

#### C. A "Falsa" Qualidade do Cen√°rio 1 (Inst√°vel)
O Cen√°rio 1 apresenta uma m√©dia de Top-10 alta (0.81), superior ao Cen√°rio 2 (0.80).
*   **Engano:** Isso ocorre porque come√ßou muito alto (R1=0.90) e caiu drasticamente. A m√©dia esconde essa queda. O Cen√°rio 3 (Otimizado) tem m√©dia 0.85 porque come√ßou alto e se manteve alto.

### 3\. Conclus√£o Final (Baseada no Hist√≥rico Completo)
A an√°lise das m√©dias globais confirma que o Cen√°rio 3 n√£o foi apenas um "golpe de sorte" no final, mas a estrat√©gia mais consistente durante todo o processo.
*   **Efici√™ncia de Treino:** O Cen√°rio 3 "desperdi√ßou" menos rounds. Ele convergiu para resultados √∫teis (Top-5 > 0.60) muito mais cedo que os outros, elevando a m√©dia global.
*   **Recomenda√ß√£o:** Para produ√ß√£o, a configura√ß√£o do Cen√°rio 3 (`LR=0.0003`, `Frac=0.2`) √© a √∫nica vi√°vel, pois oferece um equil√≠brio entre precis√£o imediata (Top-5) e seguran√ßa (Top-10) desde os primeiros rounds.